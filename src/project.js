require=function t(e,i,n){function o(a,c){if(!i[a]){if(!e[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(r)return r(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({Attack:[function(t,e,i){"use strict";cc._RFpush(e,"d7859vl19VGh7aiLUOeLykV","Attack"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){return this.node.emit("bt-action","attack"),e.SUCCESS},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],CrazyAttack:[function(t,e,i){"use strict";cc._RFpush(e,"afd5aTuevtDaLqdbQxhQGL0","CrazyAttack"),cc.Class({"extends":cc.Component,properties:{_entityData:{get:function(){return this.getComponent("entity-data")}},attackAddUp:0,speedAddUp:0},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){return this._entityData.attackValue+=this.attackAddUp,this._entityData.speed+=this.speedAddUp,this.node.emit("bt-action","crazy-attack"),e.SUCCESS},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],Defence:[function(t,e,i){"use strict";cc._RFpush(e,"b8406WFWMdG47OOkt+tj8MS","Defence"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){return this.node.emit("bt-action","defence"),e.SUCCESS},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],Escape:[function(t,e,i){"use strict";cc._RFpush(e,"1d269ZD8DtJNrboHxzKkixd","Escape"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){return this.node.emit("bt-action","escape"),e.SUCCESS},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],GlobalLimiter:[function(t,e,i){"use strict";cc._RFpush(e,"40538YotOtG56cO7qWiL4i+","GlobalLimiter"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){var n=t.blackboard.get("i",t.tree.id,i.id);n||t.blackboard.set("i",0,t.tree.id,i.id)},tick:function(t,e,i){if(!i.child)return e.ERROR;var n=t.blackboard.get("i",t.tree.id,i.id);if(n<i.parameter.maxLoop){var o=i.child._execute(t);return o!=e.SUCCESS&&o!=e.FAILURE||t.blackboard.set("i",n+1,t.tree.id,i.id),o}return e.FAILURE},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],HpCheck:[function(t,e,i){"use strict";cc._RFpush(e,"205681eU+JLjJflSC7kfDZk","HpCheck"),cc.Class({"extends":cc.Component,properties:{_entityData:{get:function(){return this.getComponent("entity-data")}}},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){var n=i.parameter.maxRange,o=i.parameter.minRange,r=this._entityData.maxHp,a=this._entityData.hp,c=a/r;return c<=n&&c>=o?e.SUCCESS:e.FAILURE},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],SelfBoom:[function(t,e,i){"use strict";cc._RFpush(e,"d8680sQ/O9G0Y56DiQiMbjO","SelfBoom"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){},enter:function(t,e,i){},open:function(t,e,i){},tick:function(t,e,i){return this.node.emit("bt-action","self-boom"),e.SUCCESS},close:function(t,e,i){},exit:function(t,e,i){}}),cc._RFpop()},{}],"attack-script":[function(t,e,i){"use strict";cc._RFpush(e,"e2a73eQUf1ArpWtm9ZjizAM","attack-script"),cc.Class({"extends":cc.Component,properties:{_equip:{get:function(){return this.node.getChildByName("equip")}},_canvas:null},onLoad:function(){this._canvas=cc.find("Canvas"),this._canvas.on("touchstart",this.onTouchStart,this)},onTouchStart:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation()),i=cc.v2(e.y,-e.x),n=-1*cc.pToAngle(i)*180/Math.PI;this._equip.runAction(cc.rotateTo(.2,n).easing(cc.easeBackInOut(3)))}}),cc._RFpop()},{}],"b3core.0.1.0module":[function(t,e,i){"use strict";cc._RFpush(e,"ad110Hy6StJbpms+NfStd/+","b3core.0.1.0module");var n={};!function(){n.VERSION="0.1.0",n.SUCCESS=1,n.FAILURE=2,n.RUNNING=3,n.ERROR=4,n.COMPOSITE="composite",n.DECORATOR="decorator",n.ACTION="action",n.CONDITION="condition",n.createUUID=function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var n=t.join("");return n},n.Class=function(t){var e=function(t){this.initialize(t)};return t&&(e.prototype=new t,e.prototype.constructor=e),e.prototype.initialize=e.prototype.initialize||function(){},e}}(),function(){var t=n.Class(),e=t.prototype;e.initialize=function(){this._baseMemory={},this._treeMemory={}},e._getTreeMemory=function(t){return this._treeMemory[t]||(this._treeMemory[t]={nodeMemory:{},openNodes:[],traversalDepth:0,traversalCycle:0}),this._treeMemory[t]},e._getNodeMemory=function(t,e){var i=t.nodeMemory;return i[e]||(i[e]={}),i[e]},e._getMemory=function(t,e){var i=this._baseMemory;return t&&(i=this._getTreeMemory(t),e&&(i=this._getNodeMemory(i,e))),i},e.set=function(t,e,i,n){var o=this._getMemory(i,n);o[t]=e},e.get=function(t,e,i){var n=this._getMemory(e,i);return n[t]},n.Blackboard=t}(),function(){var t=n.Class(),e=t.prototype;e.initialize=function(){this.tree=null,this.debug=null,this.target=null,this.blackboard=null,this._openNodes=[],this._nodeCount=0},e._enterNode=function(t){this._nodeCount++,this._openNodes.push(t)},e._openNode=function(t){},e._tickNode=function(t){},e._closeNode=function(t){this._openNodes.pop()},e._exitNode=function(t){},n.Tick=t}(),function(){var t=n.Class(),e=t.prototype;e.initialize=function(){this.id=n.createUUID(),this.title="The behavior tree",this.description="Default description",this.properties={},this.root=null,this.debug=null},e.load=function(t,e){e=e||{},this.title=t.title||this.title,this.description=t.description||this.description,this.properties=t.properties||this.properties;var i={};for(var o in t.nodes){var r=t.nodes[o];if(r.name in e)var a=e[r.name];else{if(!(r.name in n))throw EvalError('BehaviorTree.load: Invalid node name + "'+r.name+'".');var a=n[r.name]}var c=new a(r.parameters);c.id=r.id||c.id,c.title=r.title||c.title,c.description=r.description||c.description,c.properties=r.properties||c.properties,c.parameters=r.parameters||c.parameters,i[o]=c}for(var o in t.nodes){var r=t.nodes[o],c=i[o];if(c.category===n.COMPOSITE&&r.children)for(var s=0;s<r.children.length;s++){var p=r.children[s];c.children.push(i[p])}else c.category===n.DECORATOR&&r.child&&(c.child=i[r.child])}this.root=i[t.root]},e.dump=function(){var t={};if(t.title=this.title,t.description=this.description,t.root=this.root?this.root.id:null,t.properties=this.properties,t.nodes={},!this.root)return t;for(var e=[this.root];e.length>0;){var i=e.pop(),o={};if(o.id=i.id,o.name=i.name,o.title=i.title,o.description=i.description,o.properties=i.properties,o.parameters=i.parameters,i.category===n.COMPOSITE&&i.children){for(var r=[],a=i.children.length-1;a>=0;a--)r.push(i.children[a].id),e.push(i.children[a]);o.children=r}else i.category===n.DECORATOR&&i.child&&(e.push(i.child),o.child=i.child.id);t.nodes[i.id]=o}return t},e.tick=function(t,e){if(!e)throw"The blackboard parameter is obligatory and must be an instance of b3.Blackboard";var i=new n.Tick;i.debug=this.debug,i.target=t,i.blackboard=e,i.tree=this;for(var o=this.root._execute(i),r=e.get("openNodes",this.id),a=i._openNodes.slice(0),c=0,s=0;s<Math.min(r.length,a.length)&&(c=s+1,r[s]===a[s]);s++);for(var s=r.length-1;s>=c;s--)r[s]._close(i);return e.set("openNodes",a,this.id),e.set("nodeCount",i._nodeCount,this.id),o},n.BehaviorTree=t}(),function(){var t=n.Class(),e=t.prototype;e.name=null,e.category=null,e.title=null,e.description=null,e.parameters=null,e.properties=null,e.initialize=function(){this.id=n.createUUID(),this.title=this.title||this.name,this.description="",this.parameters={},this.properties={}},e._execute=function(t){this._enter(t),t.blackboard.get("isOpen",t.tree.id,this.id)||this._open(t);var e=this._tick(t);return e!==n.RUNNING&&this._close(t),this._exit(t),e},e._enter=function(t){t._enterNode(this),this.enter(t)},e._open=function(t){t._openNode(this),t.blackboard.set("isOpen",!0,t.tree.id,this.id),this.open(t)},e._tick=function(t){return t._tickNode(this),this.tick(t)},e._close=function(t){t._closeNode(this),t.blackboard.set("isOpen",!1,t.tree.id,this.id),this.close(t)},e._exit=function(t){t._exitNode(this),this.exit(t)},e.enter=function(t){},e.open=function(t){},e.tick=function(t){},e.close=function(t){},e.exit=function(t){},n.BaseNode=t}(),function(){var t=n.Class(n.BaseNode),e=t.prototype;e.category=n.ACTION,e.__BaseNode_initialize=e.initialize,e.initialize=function(){this.__BaseNode_initialize()},n.Action=t}(),function(){var t=n.Class(n.BaseNode),e=t.prototype;e.category=n.COMPOSITE,e.__BaseNode_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__BaseNode_initialize(),this.children=(t.children||[]).slice(0)},n.Composite=t}(),function(){var t=n.Class(n.BaseNode),e=t.prototype;e.category=n.DECORATOR,e.__BaseNode_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__BaseNode_initialize(),this.child=t.child||null},n.Decorator=t}(),function(){var t=n.Class(n.BaseNode),e=t.prototype;e.category=n.CONDITION,e.__BaseNode_initialize=e.initialize,e.initialize=function(){this.__BaseNode_initialize()},n.Condition=t}(),function(){var t=n.Class(n.Composite),e=t.prototype;e.name="Sequence",e.tick=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e]._execute(t);if(i!==n.SUCCESS)return i}return n.SUCCESS},n.Sequence=t}(),function(){var t=n.Class(n.Composite),e=t.prototype;e.name="Priority",e.tick=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e]._execute(t);if(i!==n.FAILURE)return i}return n.FAILURE},n.Priority=t}(),function(){var t=n.Class(n.Composite),e=t.prototype;e.name="MemSequence",e.open=function(t){t.blackboard.set("runningChild",0,t.tree.id,this.id)},e.tick=function(t){for(var e=t.blackboard.get("runningChild",t.tree.id,this.id),i=e;i<this.children.length;i++){var o=this.children[i]._execute(t);if(o!==n.SUCCESS)return o===n.RUNNING&&t.blackboard.set("runningChild",i,t.tree.id,this.id),o}return n.SUCCESS},n.MemSequence=t}(),function(){var t=n.Class(n.Composite),e=t.prototype;e.name="MemPriority",e.open=function(t){t.blackboard.set("runningChild",0,t.tree.id,this.id)},e.tick=function(t){for(var e=t.blackboard.get("runningChild",t.tree.id,this.id),i=e;i<this.children.length;i++){var o=this.children[i]._execute(t);if(o!==n.FAILURE)return o===n.RUNNING&&t.blackboard.set("runningChild",i,t.tree.id,this.id),o}return n.FAILURE},n.MemPriority=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="Inverter",e.tick=function(t){if(!this.child)return n.ERROR;var e=this.child._execute(t);return e==n.SUCCESS?e=n.FAILURE:e==n.FAILURE&&(e=n.SUCCESS),e},n.Inverter=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="Limiter",e.parameters={maxLoop:null},e.__Decorator_initialize=e.initialize,e.initialize=function(t){if(t=t||{},this.__Decorator_initialize(t),!t.maxLoop)throw"maxLoop parameter in Limiter decorator is an obligatory parameter";this.maxLoop=t.maxLoop},e.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},e.tick=function(t){if(!this.child)return n.ERROR;var e=t.blackboard.get("i",t.tree.id,this.id);if(e<this.maxLoop){var i=this.child._execute(t);return i!=n.SUCCESS&&i!=n.FAILURE||t.blackboard.set("i",e+1,t.tree.id,this.id),i}return n.FAILURE},n.Limiter=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="MaxTime",e.title="Max Time",e.parameters={maxTime:null},e.__Decorator_initialize=e.initialize,e.initialize=function(t){if(t=t||{},this.__Decorator_initialize(t),!t.maxTime)throw"maxTime parameter in MaxTime decorator is an obligatory parameter";this.maxTime=t.maxTime},e.open=function(t){var e=(new Date).getTime();t.blackboard.set("startTime",e,t.tree.id,this.id)},e.tick=function(t){if(!this.child)return n.ERROR;var e=(new Date).getTime(),i=t.blackboard.get("startTime",t.tree.id,this.id),o=this.child._execute(t);return e-i>this.maxTime?n.FAILURE:o},n.MaxTime=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="Repeater",e.parameters={maxLoop:-1},e.__Decorator_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__Decorator_initialize(t),this.maxLoop=t.maxLoop||-1},e.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},e.tick=function(t){if(!this.child)return n.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id),i=n.SUCCESS;(this.maxLoop<0||e<this.maxLoop)&&(i=this.child._execute(t),i==n.SUCCESS||i==n.FAILURE);)e++;return e=t.blackboard.set("i",e,t.tree.id,this.id),i},n.Repeater=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="RepeatUntilFailure",e.title="Repeat Until Failure",e.parameters={maxLoop:-1},e.__Decorator_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__Decorator_initialize(t),this.maxLoop=t.maxLoop||-1},e.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},e.tick=function(t){if(!this.child)return n.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id);this.maxLoop<0||e<this.maxLoop;){var i=this.child._execute(t);if(i!=n.SUCCESS)break;e++}var e=t.blackboard.set("i",e,t.tree.id,this.id);return i},n.RepeatUntilFailure=t}(),function(){var t=n.Class(n.Decorator),e=t.prototype;e.name="RepeatUntilSuccess",e.title="Repeat Until Success",e.parameters={maxLoop:-1},e.__Decorator_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__Decorator_initialize(t),this.maxLoop=t.maxLoop||-1},e.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},e.tick=function(t){if(!this.child)return n.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id);this.maxLoop<0||e<this.maxLoop;){var i=this.child._execute(t);if(i!=n.FAILURE)break;e++}var e=t.blackboard.set("i",e,t.tree.id,this.id);return i},n.RepeatUntilSuccess=t}(),function(){var t=n.Class(n.Action),e=t.prototype;e.name="Error",e.tick=function(t){return n.ERROR},n.Error=t}(),function(){var t=n.Class(n.Action),e=t.prototype;e.name="Failer",e.tick=function(t){return n.FAILURE},n.Failer=t}(),function(){var t=n.Class(n.Action),e=t.prototype;e.name="Runner",e.tick=function(t){return n.RUNNING},n.Runner=t}(),function(){var t=n.Class(n.Action),e=t.prototype;e.name="Succeeder",e.tick=function(t){return n.SUCCESS},n.Succeeder=t}(),function(){var t=n.Class(n.Action),e=t.prototype;e.name="Wait",e.parameters={milliseconds:0},e.__Action_initialize=e.initialize,e.initialize=function(t){t=t||{},this.__Action_initialize(),this.endTime=t.milliseconds||0},e.open=function(t){var e=(new Date).getTime();t.blackboard.set("startTime",e,t.tree.id,this.id)},e.tick=function(t){var e=(new Date).getTime(),i=t.blackboard.get("startTime",t.tree.id,this.id);return e-i>this.endTime?n.SUCCESS:n.RUNNING},n.Wait=t}(),e.exports=n,cc._RFpop()},{}],"conservative-behavior-tree":[function(t,e,i){"use strict";cc._RFpush(e,"329b6s5f0lM+ZRxlGVomAcF","conservative-behavior-tree"),cc.Class({"extends":cc.Component,editor:{inspector:"packages://behaviortree-editor/bt-inspector.js"},properties:{},onLoad:function(){var e=t("b3core.0.1.0module"),i=this,n=e.Class(e.Condition);n.prototype.name="HpCheck",n.prototype.__Condition_initialize=n.prototype.initialize,n.prototype.initialize=function(t){t=t||{},this.__Condition_initialize(),this.parameter=t.parameter},n.prototype.enter=function(t){return i.getComponent("HpCheck").enter(t,e,this)},n.prototype.open=function(t){return i.getComponent("HpCheck").open(t,e,this)},n.prototype.tick=function(t){return i.getComponent("HpCheck").tick(t,e,this)},n.prototype.close=function(t){return i.getComponent("HpCheck").close(t,e,this)},n.prototype.exit=function(t){return i.getComponent("HpCheck").exit(t,e,this)};var o=e.Class(e.Action);o.prototype.name="Attack",o.prototype.__Action_initialize=o.prototype.initialize,o.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},o.prototype.enter=function(t){return i.getComponent("Attack").enter(t,e,this)},o.prototype.open=function(t){return i.getComponent("Attack").open(t,e,this)},o.prototype.tick=function(t){return i.getComponent("Attack").tick(t,e,this)},o.prototype.close=function(t){return i.getComponent("Attack").close(t,e,this)},o.prototype.exit=function(t){return i.getComponent("Attack").exit(t,e,this)};var r=e.Class(e.Action);r.prototype.name="Defence",r.prototype.__Action_initialize=r.prototype.initialize,r.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},r.prototype.enter=function(t){return i.getComponent("Defence").enter(t,e,this)},r.prototype.open=function(t){return i.getComponent("Defence").open(t,e,this)},r.prototype.tick=function(t){return i.getComponent("Defence").tick(t,e,this)},r.prototype.close=function(t){return i.getComponent("Defence").close(t,e,this)},r.prototype.exit=function(t){return i.getComponent("Defence").exit(t,e,this)};var a=e.Class(e.Action);a.prototype.name="Escape",a.prototype.__Action_initialize=a.prototype.initialize,a.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},a.prototype.enter=function(t){return i.getComponent("Escape").enter(t,e,this)},a.prototype.open=function(t){return i.getComponent("Escape").open(t,e,this)},a.prototype.tick=function(t){return i.getComponent("Escape").tick(t,e,this)},a.prototype.close=function(t){return i.getComponent("Escape").close(t,e,this)},a.prototype.exit=function(t){return i.getComponent("Escape").exit(t,e,this)};var c=new e.BehaviorTree;c.root=new e.Sequence({parameter:{},children:[new e.Priority({parameter:{},children:[new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:1,minRange:.8}}),new o({parameter:{}})]}),new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:.8,minRange:.5}}),new r({parameter:{}})]}),new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:.5,minRange:0}}),new a({parameter:{}})]})]})]}),this.tree=c,this.blackboard=new e.Blackboard,this.b3=e},tick:function(t){var e={};void 0!=t&&(e=t),this.tree.tick(e,this.blackboard)}}),cc._RFpop()},{"b3core.0.1.0module":"b3core.0.1.0module"}],"conservative-fsm":[function(t,e,i){"use strict";cc._RFpush(e,"d7cfbR+iU9EZpKKpz/1r0GA","conservative-fsm");var n=t("state-machine"),o={initial:"nope",events:[{name:"startup",from:"nope",to:"attacking"},{name:"defence",from:"attacking",to:"defencing"},{name:"escape",from:"defencing",to:"escaping"},{name:"attack",from:"defencing",to:"attacking"},{name:"defence",from:"escaping",to:"defencing"},{name:"escape",from:"attacking",to:"escaping"},{name:"attack",from:"escaping",to:"attacking"}]},r=function(){var t=n.create(o);return t.ASYNC=n.ASYNC,t};e.exports={create:r},cc._RFpop()},{"state-machine":"state-machine"}],"conservative-impl-script":[function(t,e,i){"use strict";cc._RFpush(e,"1c1d8NKhplDeLSVFLM/J2E3","conservative-impl-script"),cc.Class({"extends":cc.Component,properties:{_fsm:null,_player:null,_entityData:{get:function(){return this.getComponent("entity-data")}},_behaviorTree:{get:function(){return this.getComponent("conservative-behavior-tree")}}},onLoad:function(){this._fsm=t("conservative-fsm").create(),this._player=cc.find("Canvas/player"),this.node.on("bt-action",this.onBTAction,this),this._fsm.startup()},onBTAction:function(t){this._fsm.can(t.detail)&&this._fsm[t.detail]()},update:function(){this._behaviorTree.tick()},lateUpdate:function(){var t=this._player.position;if("attacking"==this._fsm.current){var e=cc.pSub(t,this.node.position),i=cc.pMult(cc.pNormalize(e),this._entityData.speed);if(e.mag()<=this._entityData.speed)return;this.node.position=cc.pAdd(i,this.node.position)}else if("defencing"==this._fsm.current);else if("escaping"==this._fsm.current){var n=cc.pSub(t,this.node.position),o=cc.pMult(cc.pNormalize(n),this._entityData.speed);this.node.position=cc.pAdd(cc.pNeg(o),this.node.position),(Math.abs(this.node.x)>=480||Math.abs(this.node.y)>=320)&&this.node.parent&&this.node.removeFromParent()}}}),cc._RFpop()},{"conservative-fsm":"conservative-fsm"}],"enemy-generator":[function(t,e,i){"use strict";cc._RFpush(e,"5be8dYe3oxMpoLEImPHPmd1","enemy-generator"),cc.Class({"extends":cc.Component,properties:{enemyPrefabArray:[cc.Prefab],deltaNum:0,totalTime:0,deltaDuration:0,_currentTime:0,_canvas:null,_sceneLoading:!1},onLoad:function(){this._canvas=cc.find("Canvas"),this.generate(),this.schedule(this.generate.bind(this),this.deltaDuration)},generate:function(){if(1==this._canvas.childrenCount&&"player"==this._canvas.children[0].name){if(this._currentTime==this.totalTime&&!this._sceneLoading)return this._sceneLoading=!0,void cc.director.loadScene("win-scene");for(var t=this.deltaNum*this._currentTime,e=0;e<t;e++){var i=Math.floor(Math.random()*this.enemyPrefabArray.length),n=cc.instantiate(this.enemyPrefabArray[i]),o=null;o=Math.random()>=.5?cc.v2(480*cc.randomMinus1To1(),320*Math.sign(cc.randomMinus1To1())):cc.v2(480*Math.sign(cc.randomMinus1To1()),320*cc.randomMinus1To1()),this._canvas.addChild(n),n.position=o}this._currentTime++}}}),cc._RFpop()},{}],"enemy-test-script":[function(t,e,i){"use strict";cc._RFpush(e,"611857AqyBLCa9H8qR13MzY","enemy-test-script"),cc.Class({"extends":cc.Component,editor:{requireComponent:"entity-data"},properties:{_entityData:{get:function(){return this.getComponent("entity-data")}},_hurting:!1,_hurtTimeStamp:null,_hurtValue:null,_firstTimeHurt:!1,hurtDeltaTime:.3},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0},onCollisionEnter:function(t,e){"equip"==t.node.group&&(this._hurtTimeStamp=Date.now(),this._hurtValue=t.getComponent("entity-data").attackValue,this._hurting=!0,this._firstTimeHurt=!0)},onCollisionExit:function(t,e){"equip"==t.node.group&&(this._hurting=!1)},update:function(t){this._hurting&&(this._hurtTimeStamp+1e3*this.hurtDeltaTime<=Date.now()||this._firstTimeHurt)&&(this._firstTimeHurt=!1,this._hurtTimeStamp=Date.now(),this._entityData.hp-=this._hurtValue,this.node.emit("update-hp"),this._entityData.hp<=0&&this.node.parent&&this.node.removeFromParent())}}),cc._RFpop()},{}],"entity-data":[function(t,e,i){"use strict";cc._RFpush(e,"00e6etViq5JPZgTC2rYJu+8","entity-data"),cc.Class({"extends":cc.Component,properties:{speed:0,hp:0,attackValue:0,maxHp:0}}),cc._RFpop()},{}],"equip-script":[function(t,e,i){"use strict";cc._RFpush(e,"ae190DmYodEnYeU/z875sRC","equip-script"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],"hp-tips-script":[function(t,e,i){"use strict";cc._RFpush(e,"7f115v6btdF/Ya7byfeMGa8","hp-tips-script"),cc.Class({"extends":cc.Component,properties:{_entityData:{get:function(){return this.node.parent.getComponent("entity-data")}},_hpLabel:{get:function(){return this.getComponent(cc.Label)}}},onLoad:function(){this.onUpdateHp(),this.node.parent.on("update-hp",this.onUpdateHp,this)},onUpdateHp:function(){this._hpLabel.string=this._entityData.hp}}),cc._RFpop()},{}],"invasive-behavior-tree":[function(t,e,i){"use strict";cc._RFpush(e,"b66bcusiERF35GBMwB9ydwt","invasive-behavior-tree"),cc.Class({"extends":cc.Component,editor:{inspector:"packages://behaviortree-editor/bt-inspector.js"},properties:{},onLoad:function(){var e=t("b3core.0.1.0module"),i=this,n=e.Class(e.Condition);n.prototype.name="HpCheck",n.prototype.__Condition_initialize=n.prototype.initialize,n.prototype.initialize=function(t){t=t||{},this.__Condition_initialize(),this.parameter=t.parameter},n.prototype.enter=function(t){return i.getComponent("HpCheck").enter(t,e,this)},n.prototype.open=function(t){return i.getComponent("HpCheck").open(t,e,this)},n.prototype.tick=function(t){return i.getComponent("HpCheck").tick(t,e,this)},n.prototype.close=function(t){return i.getComponent("HpCheck").close(t,e,this)},n.prototype.exit=function(t){return i.getComponent("HpCheck").exit(t,e,this)};var o=e.Class(e.Action);o.prototype.name="Attack",o.prototype.__Action_initialize=o.prototype.initialize,o.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},o.prototype.enter=function(t){return i.getComponent("Attack").enter(t,e,this)},o.prototype.open=function(t){return i.getComponent("Attack").open(t,e,this)},o.prototype.tick=function(t){return i.getComponent("Attack").tick(t,e,this)},o.prototype.close=function(t){return i.getComponent("Attack").close(t,e,this)},o.prototype.exit=function(t){return i.getComponent("Attack").exit(t,e,this)};var r=e.Class(e.Action);r.prototype.name="CrazyAttack",r.prototype.__Action_initialize=r.prototype.initialize,r.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},r.prototype.enter=function(t){return i.getComponent("CrazyAttack").enter(t,e,this)},r.prototype.open=function(t){return i.getComponent("CrazyAttack").open(t,e,this)},r.prototype.tick=function(t){return i.getComponent("CrazyAttack").tick(t,e,this)},r.prototype.close=function(t){return i.getComponent("CrazyAttack").close(t,e,this)},r.prototype.exit=function(t){return i.getComponent("CrazyAttack").exit(t,e,this)};var a=e.Class(e.Action);a.prototype.name="SelfBoom",a.prototype.__Action_initialize=a.prototype.initialize,a.prototype.initialize=function(t){t=t||{},this.__Action_initialize(),this.parameter=t.parameter},a.prototype.enter=function(t){return i.getComponent("SelfBoom").enter(t,e,this)},a.prototype.open=function(t){return i.getComponent("SelfBoom").open(t,e,this)},a.prototype.tick=function(t){return i.getComponent("SelfBoom").tick(t,e,this)},a.prototype.close=function(t){return i.getComponent("SelfBoom").close(t,e,this)},a.prototype.exit=function(t){return i.getComponent("SelfBoom").exit(t,e,this)};var c=e.Class(e.Decorator);c.prototype.name="GlobalLimiter",c.prototype.__Decorator_initialize=c.prototype.initialize,c.prototype.initialize=function(t){t=t||{},this.__Decorator_initialize(),this.parameter=t.parameter,this.child=t.child},c.prototype.enter=function(t){return i.getComponent("GlobalLimiter").enter(t,e,this)},c.prototype.open=function(t){return i.getComponent("GlobalLimiter").open(t,e,this)},c.prototype.tick=function(t){return i.getComponent("GlobalLimiter").tick(t,e,this)},c.prototype.close=function(t){return i.getComponent("GlobalLimiter").close(t,e,this)},c.prototype.exit=function(t){return i.getComponent("GlobalLimiter").exit(t,e,this)};var s=new e.BehaviorTree;s.root=new e.Sequence({parameter:{},children:[new e.Priority({parameter:{},children:[new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:1,minRange:.8}}),new o({parameter:{}})]}),new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:.8,minRange:.5}}),new c({parameter:{maxLoop:1},child:new r({parameter:{}})})]}),new e.Sequence({parameter:{},children:[new n({parameter:{maxRange:.5,minRange:0}}),new c({parameter:{maxLoop:1},child:new a({parameter:{}})})]})]})]}),this.tree=s,this.blackboard=new e.Blackboard,this.b3=e},tick:function(t){var e={};void 0!=t&&(e=t),this.tree.tick(e,this.blackboard)}}),cc._RFpop()},{"b3core.0.1.0module":"b3core.0.1.0module"}],"invasive-fsm":[function(t,e,i){"use strict";cc._RFpush(e,"7492bv+MmpLoa59/4tX364/","invasive-fsm");var n=t("state-machine"),o={initial:"nope",events:[{name:"startup",from:"nope",to:"attacking"},{name:"crazy-attack",from:"attacking",to:"crazy-attacking"},{name:"self-boom",from:"crazy-attacking",to:"self-booming"},{name:"attack",from:"crazy-attacking",to:"attacking"}]},r=function(){var t=n.create(o);return t.ASYNC=n.ASYNC,t};e.exports={create:r},cc._RFpop()},{"state-machine":"state-machine"}],"invasive-impl-script":[function(t,e,i){"use strict";cc._RFpush(e,"c46b21wcNtKWr3BFfcXd7uT","invasive-impl-script"),cc.Class({"extends":cc.Component,properties:{_fsm:null,_player:null,_entityData:{get:function(){return this.getComponent("entity-data")}},_behaviorTree:{get:function(){return this.getComponent("invasive-behavior-tree")}},_booming:!1,boomDuration:0},onLoad:function(){this._fsm=t("invasive-fsm").create(),this._player=cc.find("Canvas/player"),this.node.on("bt-action",this.onBTAction,this),this._fsm.startup()},onBTAction:function(t){this._fsm.can(t.detail)&&this._fsm[t.detail]()},update:function(){this._behaviorTree.tick()},lateUpdate:function(){var t=this._player.position;if("attacking"==this._fsm.current||"crazy-attacking"==this._fsm.current){var e=cc.pSub(t,this.node.position),i=cc.pMult(cc.pNormalize(e),this._entityData.speed);if(e.mag()<=this._entityData.speed)return;this.node.position=cc.pAdd(i,this.node.position)}else"self-booming"==this._fsm.current&&(this._booming||(this._booming=!0,this.node.getChildByName("self-boom-mask").active=!0,this.scheduleOnce(function(){this.node.parent&&this.node.removeFromParent()}.bind(this),this.boomDuration)))}}),cc._RFpop()},{"invasive-fsm":"invasive-fsm"}],"move-script":[function(t,e,i){"use strict";cc._RFpush(e,"4a5c1IdzsVLcq5/42rcGplI","move-script"),cc.Class({"extends":cc.Component,properties:{_left:!1,_right:!1,_up:!1,_down:!1,_entityData:{get:function(){return this.getComponent("entity-data")}}},onLoad:function(){cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this)},onKeyDown:function(t){switch(t.keyCode){case cc.KEY.w:this._up=!0;break;case cc.KEY.s:this._down=!0;break;case cc.KEY.a:this._left=!0;break;case cc.KEY.d:this._right=!0}},onKeyUp:function(t){switch(t.keyCode){case cc.KEY.w:this._up=!1;break;case cc.KEY.s:this._down=!1;break;case cc.KEY.a:this._left=!1;break;case cc.KEY.d:this._right=!1}},update:function(t){var e=this._entityData.speed;this._left&&(this.node.x-=e),this._right&&(this.node.x+=e),this._down&&(this.node.y-=e),this._up&&(this.node.y+=e)}}),cc._RFpop()},{}],"player--test-script":[function(t,e,i){"use strict";cc._RFpush(e,"8dfb6U2aANAnbhvXkfssBKk","player--test-script"),cc.Class({"extends":cc.Component,editor:{requireComponent:"entity-data"},properties:{_entityData:{get:function(){return this.getComponent("entity-data")}},_hurting:!1,_hurtTimeStamp:null,_hurtValue:null,_firstTimeHurt:!1,hurtDeltaTime:.3,_sceneLoading:!1},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0},onCollisionEnter:function(t,e){"enemy"==t.node.group&&(this._hurtTimeStamp=Date.now(),this._hurtValue=t.getComponent("entity-data").attackValue,this._hurting=!0,this._firstTimeHurt=!0)},onCollisionExit:function(t,e){"enemy"==t.node.group&&(this._hurting=!1)},update:function(t){this._hurting&&(this._hurtTimeStamp+1e3*this.hurtDeltaTime<=Date.now()||this._firstTimeHurt)&&(this._firstTimeHurt=!1,this._hurtTimeStamp=Date.now(),this._entityData.hp-=this._hurtValue,this.node.emit("update-hp"),this._entityData.hp<=0&&(this._sceneLoading||(this._sceneLoading=!0,cc.director.loadScene("game-over-scene"))))}}),cc._RFpop()},{}],"restart-script":[function(t,e,i){"use strict";cc._RFpush(e,"c4b209E+ORHU6gm6a/kL9WA","restart-script"),cc.Class({"extends":cc.Component,properties:{_sceneLoading:!1},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this)},onTouchStart:function(t){this._sceneLoading||(this._sceneLoading=!0,cc.director.loadScene("main-scene"))}}),cc._RFpop()},{}],"state-machine":[function(t,e,i){"use strict";cc._RFpush(e,"f0d9cUmXkRFkoz3tU2ZSnlf","state-machine"),function(){var t={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,i){var n="string"==typeof e.initial?{state:e.initial}:e.initial,o=e.terminal||e["final"],r=i||e.target||{},a=e.events||[],c=e.callbacks||{},s={},p={},u=function(e){var i=Array.isArray(e.from)?e.from:e.from?[e.from]:[t.WILDCARD];s[e.name]=s[e.name]||{};for(var n=0;n<i.length;n++)p[i[n]]=p[i[n]]||[],p[i[n]].push(e.name),s[e.name][i[n]]=e.to||i[n];e.to&&(p[e.to]=p[e.to]||[])};n&&(n.event=n.event||"startup",u({name:n.event,from:"none",to:n.state}));for(var h=0;h<a.length;h++)u(a[h]);
for(var l in s)s.hasOwnProperty(l)&&(r[l]=t.buildEvent(l,s[l]));for(var l in c)c.hasOwnProperty(l)&&(r[l]=c[l]);return r.current="none",r.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},r.can=function(e){return!this.transition&&void 0!==s[e]&&(s[e].hasOwnProperty(this.current)||s[e].hasOwnProperty(t.WILDCARD))},r.cannot=function(t){return!this.can(t)},r.transitions=function(){return(p[this.current]||[]).concat(p[t.WILDCARD]||[])},r.isFinished=function(){return this.is(o)},r.error=e.error||function(t,e,i,n,o,r,a){throw a||r},r.states=function(){return Object.keys(p).sort()},n&&!n.defer&&r[n.event](),r},doCallback:function(e,i,n,o,r,a){if(i)try{return i.apply(e,[n,o,r].concat(a))}catch(c){return e.error(n,o,r,a,t.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",c)}},beforeAnyEvent:function(e,i,n,o,r){return t.doCallback(e,e.onbeforeevent,i,n,o,r)},afterAnyEvent:function(e,i,n,o,r){return t.doCallback(e,e.onafterevent||e.onevent,i,n,o,r)},leaveAnyState:function(e,i,n,o,r){return t.doCallback(e,e.onleavestate,i,n,o,r)},enterAnyState:function(e,i,n,o,r){return t.doCallback(e,e.onenterstate||e.onstate,i,n,o,r)},changeState:function(e,i,n,o,r){return t.doCallback(e,e.onchangestate,i,n,o,r)},beforeThisEvent:function(e,i,n,o,r){return t.doCallback(e,e["onbefore"+i],i,n,o,r)},afterThisEvent:function(e,i,n,o,r){return t.doCallback(e,e["onafter"+i]||e["on"+i],i,n,o,r)},leaveThisState:function(e,i,n,o,r){return t.doCallback(e,e["onleave"+n],i,n,o,r)},enterThisState:function(e,i,n,o,r){return t.doCallback(e,e["onenter"+o]||e["on"+o],i,n,o,r)},beforeEvent:function(e,i,n,o,r){if(!1===t.beforeThisEvent(e,i,n,o,r)||!1===t.beforeAnyEvent(e,i,n,o,r))return!1},afterEvent:function(e,i,n,o,r){t.afterThisEvent(e,i,n,o,r),t.afterAnyEvent(e,i,n,o,r)},leaveState:function(e,i,n,o,r){var a=t.leaveThisState(e,i,n,o,r),c=t.leaveAnyState(e,i,n,o,r);return!1!==a&&!1!==c&&(t.ASYNC===a||t.ASYNC===c?t.ASYNC:void 0)},enterState:function(e,i,n,o,r){t.enterThisState(e,i,n,o,r),t.enterAnyState(e,i,n,o,r)},buildEvent:function(e,i){return function(){var n=this.current,o=i[n]||(i[t.WILDCARD]!=t.WILDCARD?i[t.WILDCARD]:n)||n,r=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,n,o,r,t.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,n,o,r,t.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===t.beforeEvent(this,e,n,o,r))return t.Result.CANCELLED;if(n===o)return t.afterEvent(this,e,n,o,r),t.Result.NOTRANSITION;var a=this;this.transition=function(){return a.transition=null,a.current=o,t.enterState(a,e,n,o,r),t.changeState(a,e,n,o,r),t.afterEvent(a,e,n,o,r),t.Result.SUCCEEDED},this.transition.cancel=function(){a.transition=null,t.afterEvent(a,e,n,o,r)};var c=t.leaveState(this,e,n,o,r);return!1===c?(this.transition=null,t.Result.CANCELLED):t.ASYNC===c?t.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof i?("undefined"!=typeof e&&e.exports&&(i=e.exports=t),i.StateMachine=t):"function"==typeof define&&define.amd?define(function(e){return t}):"undefined"!=typeof window?window.StateMachine=t:"undefined"!=typeof self&&(self.StateMachine=t)}(),cc._RFpop()},{}]},{},["Defence","Escape","conservative-behavior-tree","CrazyAttack","GlobalLimiter","SelfBoom","invasive-behavior-tree","Attack","HpCheck","conservative-fsm","invasive-fsm","b3core.0.1.0module","state-machine","attack-script","conservative-impl-script","enemy-generator","enemy-test-script","entity-data","equip-script","hp-tips-script","invasive-impl-script","move-script","player--test-script","restart-script"]);